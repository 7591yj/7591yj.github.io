---
interface Line {
  text: string;
  type?: "ok" | "warn" | "err" | "info";
}

interface Props {
  lines: Line[];
}

const { lines } = Astro.props;

const badge: Record<string, string> = {
  ok:   "  ok  ",
  warn: " warn ",
  err:  "  err ",
  info: " .... ",
};
---

<div class="boot">
  {lines.map(({ text, type = "info" }, i) => (
    <div class={`boot__line boot__line--${type}`} style={`--i:${i}`}>
      <span class="boot__badge">{badge[type]}</span>
      <span class="boot__text">{text}</span>
    </div>
  ))}
</div>

<style>
  /* github-light token colors (default) */
  .boot {
    --boot-ok:   #116329;
    --boot-warn: #9a6700;
    --boot-err:  #cf222e;
  }

  /* github-dark token colors */
  :global([data-theme="dark"]) .boot {
    --boot-ok:   #3fb950;
    --boot-warn: #e3b341;
    --boot-err:  #ff7b72;
  }

  .boot {
    font-family: "PlemolJP", monospace;
    font-size: var(--font-size-sm);
    line-height: 1.8;
    padding: 1rem 1.25rem;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-left: 2px solid var(--color-accent);
    margin: 1rem 0;
  }

  .boot__line {
    display: flex;
    gap: 0.75rem;
    opacity: 0;
    animation: boot-appear 0.04s ease forwards;
    animation-delay: calc(var(--i) * 110ms);
  }

  .boot__badge {
    flex-shrink: 0;
    user-select: none;
    letter-spacing: 0;
  }

  .boot__line--ok   .boot__badge { color: var(--boot-ok); }
  .boot__line--warn .boot__badge { color: var(--boot-warn); }
  .boot__line--err  .boot__badge { color: var(--boot-err); }
  .boot__line--info .boot__badge { color: var(--color-text-muted); }

  .boot__text {
    color: var(--color-text-secondary);
  }

  .boot__line--err  .boot__text { color: var(--boot-err); }
  .boot__line--warn .boot__text { color: var(--color-text-primary); }

  @keyframes boot-appear {
    to { opacity: 1; }
  }
</style>
