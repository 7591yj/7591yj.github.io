---
interface Props {
  src: string;
  alt?: string;
  imgSize?: string;
  class?: string;
  [key: string]: any;
}

const { src, alt = "", imgSize = "100%", class: className, ...rest } = Astro.props;
---

<div class:list={["cut-img", className]} style={`--img-size: ${imgSize}`}>
  <div class="cut-img__inner">
    <img src={src} alt={alt} {...rest} />
  </div>
</div>

<style>
  .cut-img {
    --cut: 0.75em;
    --border-w: 1px;
    --clip: polygon(
      0 0,
      100% 0,
      100% calc(100% - var(--cut)),
      calc(100% - var(--cut)) 100%,
      0 100%
    );
    position: relative;
    background: var(--color-border);
    clip-path: var(--clip);
    line-height: 0;
    overflow: hidden;
    transition: background var(--duration-normal) var(--ease-out-expo);
  }

  /* Hover border */
  .cut-img::before {
    content: "";
    position: absolute;
    inset: 0;
    clip-path: var(--clip);
    background: var(--color-border-hover);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--duration-normal) var(--ease-out-expo);
  }

  .cut-img:hover::before {
    opacity: 1;
  }

  .cut-img__inner {
    position: relative;
    margin: var(--border-w);
    clip-path: var(--clip);
    background: var(--color-bg-secondary);
    overflow: hidden;
    height: calc(100% - 2 * var(--border-w));
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .cut-img__inner img {
    display: block;
    width: var(--img-size);
    height: var(--img-size);
    object-fit: scale-down;
    transition: transform var(--duration-normal) var(--ease-out-expo);
  }

  .cut-img:hover .cut-img__inner img {
    transform: scale(1.1);
  }
</style>
